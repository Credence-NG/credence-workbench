---
import LayoutSidebar from "../../app/LayoutSidebar.astro";
import { PendingRequests } from "../../components/CredentialRequests";
import { checkUserSession } from "../../utils/check-session";

export const prerender = false;

const response = await checkUserSession({cookies: Astro.cookies, currentPath: Astro.url.pathname});

if (!response.authorized) {
	return Astro.redirect(response.redirect);
}
---

<LayoutSidebar notFoundPage={!response.permitted}>
	<PendingRequests client:only="react" />
</LayoutSidebar>