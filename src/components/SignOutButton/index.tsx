import { removeFromLocalStorage } from '../../api/Auth';
import { storageKeys } from '../../config/CommonConstant';

const SignOutButton = () => {
	const signOut = async () => {
		await removeFromLocalStorage(storageKeys.TOKEN);
		await removeFromLocalStorage(storageKeys.USER_EMAIL);
		await removeFromLocalStorage(storageKeys.ORG_ID);
		await removeFromLocalStorage(storageKeys.ORG_ROLES);
		await removeFromLocalStorage(storageKeys.ECOSYSTEM_ID);
		await removeFromLocalStorage(storageKeys.ECOSYSTEM_ROLE);
		await removeFromLocalStorage(storageKeys.USER_PROFILE);

		const response = await fetch('/api/auth/signout', {
			method: 'GET',
			headers: {
				'Content-Type': 'application/json',
			},
		});

		if (response.redirected) {
			window.location.assign(response.url);
		}
	};
	return (
		<button
			onClick={signOut}
			className="w-full text-start cursor-pointer block px-4 py-2 my-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white flex space-x-2"
			role="menuitem"
		>
			{' '}
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="16"
				height="20"
				viewBox="0 0 16 20"
				fill="none"
			>
				<path
					d="M10.4912 16.3968C10.377 16.3974 10.2636 16.3748 10.1581 16.3303C10.0525 16.2858 9.95675 16.2204 9.87649 16.1379C9.71364 15.9725 9.62213 15.7482 9.62213 15.5143C9.62213 15.2805 9.71364 15.0561 9.87649 14.8907L13.9011 10.8078L9.87649 6.72488C9.79101 6.64409 9.72246 6.54666 9.67491 6.43841C9.62735 6.33016 9.60184 6.2133 9.59975 6.09481C9.59766 5.97633 9.61923 5.85863 9.66296 5.74874C9.70669 5.63886 9.77175 5.53904 9.85445 5.45524C9.93703 5.37144 10.0354 5.30539 10.1437 5.26101C10.252 5.21662 10.368 5.19482 10.4848 5.19692C10.6016 5.199 10.7168 5.22494 10.8235 5.27317C10.9302 5.3214 11.0262 5.39094 11.1059 5.47765L15.7453 10.1842C15.9082 10.3496 15.9996 10.574 15.9996 10.8078C15.9996 11.0417 15.9082 11.266 15.7453 11.4314L11.1059 16.1379C11.0257 16.2204 10.9298 16.2858 10.8243 16.3303C10.7188 16.3748 10.6054 16.3974 10.4912 16.3968Z"
					fill="#455A64"
				/>
				<path
					d="M7.07692 19.5973H3.38462C2.95783 19.6135 2.53166 19.5545 2.13047 19.4237C1.72929 19.293 1.36098 19.0931 1.04662 18.8353C0.732246 18.5775 0.477994 18.267 0.298412 17.9216C0.118818 17.5762 0.0174154 17.2026 0 16.8223V3.17754C0.0174154 2.79717 0.118818 2.42359 0.298412 2.07818C0.477994 1.73277 0.732246 1.42231 1.04662 1.16456C1.36098 0.906815 1.72929 0.706838 2.13047 0.576083C2.53166 0.445318 2.95783 0.38634 3.38462 0.402519H7.07692C7.32174 0.402519 7.55653 0.489191 7.72964 0.643463C7.90274 0.797745 8 1.00698 8 1.22515C8 1.44334 7.90274 1.65257 7.72964 1.80684C7.55653 1.96113 7.32174 2.04779 7.07692 2.04779H3.38462C3.01916 2.01947 2.65551 2.1176 2.36907 2.32181C2.08262 2.52603 1.89537 2.82068 1.84615 3.14463V16.8223C1.89537 17.1463 2.08262 17.4409 2.36907 17.6451C2.65551 17.8493 3.01916 17.9475 3.38462 17.9191H7.07692C7.32174 17.9191 7.55653 18.0059 7.72964 18.1601C7.90274 18.3144 8 18.5236 8 18.7417C8 18.96 7.90274 19.1692 7.72964 19.3235C7.55653 19.4777 7.32174 19.5644 7.07692 19.5644V19.5973Z"
					fill="#455A64"
				/>
				<path
					d="M15.4244 11.6H6.97639C6.82363 11.6 6.67712 11.5157 6.5691 11.3657C6.46108 11.2157 6.40039 11.0122 6.40039 10.8C6.40039 10.5878 6.46108 10.3843 6.5691 10.2343C6.67712 10.0843 6.82363 10 6.97639 10H15.4244C15.5771 10 15.7237 10.0843 15.8317 10.2343C15.9397 10.3843 16.0004 10.5878 16.0004 10.8C16.0004 11.0122 15.9397 11.2157 15.8317 11.3657C15.7237 11.5157 15.5771 11.6 15.4244 11.6Z"
					fill="#455A64"
				/>
			</svg>
			<span> Sign out</span>
		</button>
	);
};

export default SignOutButton;
